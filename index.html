<!-- Firebase COMPAT (GitHub Pages SAFE) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
/* ===============================
   ğŸ” CONFIG FIREBASE
   =============================== */
const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "SEU_PROJETO.firebaseapp.com",
    projectId: "SEU_PROJETO",
    storageBucket: "SEU_PROJETO.appspot.com",
    messagingSenderId: "XXXXXXX",
    appId: "SEU_APP_ID"
};

firebase.initializeApp(firebaseConfig);

const db = firebase.firestore();
const auth = firebase.auth();
const appId = "task-board-prod";

/* ===============================
   ğŸ”„ ESTADO GLOBAL
   =============================== */
let allTasks = [];
let currentBoardId = "geral";

/* ===============================
   ğŸ§© UTIL
   =============================== */
const showMsg = (txt) => alert(txt);
const formatDate = d => d ? new Date(d + "T12:00:00").toLocaleDateString("pt-BR") : "";

/* ===============================
   ğŸ§± RENDERIZAÃ‡ÃƒO
   =============================== */
function renderBoard() {
    ["todo","doing","done"].forEach(s => {
        document.getElementById(`${s}-list`).innerHTML = "";
    });

    allTasks
        .filter(t => t.boardId === currentBoardId)
        .forEach(task => {
            document.getElementById(`${task.status}-list`)
                .appendChild(createCard(task));
        });
}

function createCard(task) {
    const div = document.createElement("div");
    div.className = "task-card bg-white p-3 rounded-md shadow-sm border";
    div.draggable = true;
    div.id = task.id;

    div.innerHTML = `
        <div class="card-controls absolute top-2 right-2 flex gap-2">
            <button class="edit-btn"><i class="fas fa-pencil"></i></button>
            <button class="del-btn"><i class="fas fa-trash"></i></button>
        </div>
        <h4 class="font-bold text-sm">${task.tarefa}</h4>
        ${task.solicitante ? `<div class="text-xs">ğŸ‘¤ ${task.solicitante}</div>` : ""}
        ${task.dataAgendamento ? `<div class="text-xs">ğŸ“… ${formatDate(task.dataAgendamento)}</div>` : ""}
        ${task.observacoes ? `<div class="text-xs text-gray-500 line-clamp-3">${task.observacoes}</div>` : ""}
    `;

    div.querySelector(".del-btn").onclick = () => {
        if(confirm("Excluir tarefa?")){
            db.collection("artifacts")
              .doc(appId)
              .collection("public")
              .doc("data")
              .collection("tasks")
              .doc(task.id)
              .delete();
        }
    };

    div.querySelector(".edit-btn").onclick = () => openModal(task);

    div.ondragstart = e => e.dataTransfer.set
